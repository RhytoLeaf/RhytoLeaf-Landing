<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Style Under Stress - Crucial Conversations quiz to assess your communication patterns during stressful situations.">
    <link rel="canonical" href="https://rhytoleaf.ca/apps/style-under-stress.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Style Under Stress">
    <meta property="og:description" content="Assess your communication patterns during stressful conversations. Take the Crucial Conversations quiz.">
    <meta property="og:image" content="https://rhytoleaf.ca/images/styleunderstress-logo.jpg">
    <meta property="og:url" content="https://rhytoleaf.ca/apps/style-under-stress.html">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Style Under Stress">
    <meta name="twitter:description" content="Assess your communication patterns during stressful conversations.">
    <meta name="twitter:image" content="https://rhytoleaf.ca/images/styleunderstress-logo.jpg">
    <meta property="twitter:url" content="https://rhytoleaf.ca/apps/style-under-stress.html">

    <title>Style Under Stress</title>

    <link rel="icon" href="../images/logo-icon.png" type="image/png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* ============================================
           CSS VARIABLES & BASE STYLES
           ============================================ */
        :root {
            --rhyto-green: #00CE7C;
            --rhyto-green-hover: #00b56d;
            --rhyto-green-dark: #009d5e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            background-attachment: fixed;
            color: #f2f2f2;
            padding: 1rem;
            overflow-x: hidden;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            background-attachment: fixed;
            color: #f2f2f2;
        }

        body:not(.dark-mode) {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2, #80deea);
            background-attachment: fixed;
            color: #1a1a1a;
        }

        /* ============================================
           GLASSMORPHISM
           ============================================ */
        .glass {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        body:not(.dark-mode) .glass {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        /* ============================================
           HEADER & NAVIGATION
           ============================================ */
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto 2rem;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            color: inherit;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .back-button:hover {
            color: var(--rhyto-green);
        }

        .back-button svg {
            width: 20px;
            height: 20px;
            margin-right: 0.5rem;
        }

        .logo-center {
            flex: 1;
            text-align: center;
        }

        .logo-center img {
            width: 60px;
            height: auto;
            transition: transform 0.3s ease;
            cursor: pointer;
            border-radius: 20%;
        }

        .logo-center img:hover {
            transform: scale(1.1);
        }

        /* Theme Toggle */
        .theme-toggle-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-toggle-wrapper i {
            font-size: 1.5rem;
            color: var(--rhyto-green);
        }

        .form-check-input {
            cursor: pointer;
        }

        .form-check-input:checked {
            background-color: var(--rhyto-green);
            border-color: var(--rhyto-green);
        }

        .form-check-input:not(:checked) {
            background-color: #f59e0b;
            border-color: #f59e0b;
        }

        /* ============================================
           MAIN CONTENT
           ============================================ */
        .container-xxl {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 1rem;
            color: var(--rhyto-green);
            font-weight: 700;
        }

        h2 {
            font-size: clamp(1.8rem, 4.5vw, 3rem);
            text-align: center;
        }

        h3 {
            text-align: center;
        }

        #why-benefit-header {
            cursor: pointer;
            text-decoration: underline;
            color: var(--rhyto-green);
            transition: opacity 0.3s ease;
        }

        #why-benefit-header:hover {
            opacity: 0.8;
        }

        /* Question Card */
        .question-card {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 2rem 1.5rem;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem auto;
            max-width: 900px;
            width: 100%;
        }

        body:not(.dark-mode) .question-card {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        #question-number {
            font-size: clamp(1.5rem, 4vw, 3.5rem);
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--rhyto-green);
        }

        #question-text {
            text-align: center;
            font-size: clamp(0.95rem, 2.2vw, 1.5rem);
            line-height: 1.6;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
        }

        /* ============================================
           QUESTION GRID
           ============================================ */
        #question-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 0 1rem;
        }

        .grid-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: inherit;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .grid-button:hover {
            transform: scale(1.1);
            border-color: var(--rhyto-green);
        }

        .grid-button.true {
            background-color: rgba(0, 255, 251, 0.8);
            border-color: rgb(0, 255, 251);
            color: #000;
        }

        .grid-button.false {
            background-color: rgba(255, 31, 102, 0.8);
            border-color: rgb(255, 31, 102);
            color: #fff;
        }

        /* ============================================
           BUTTONS
           ============================================ */
        #begin-button {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            padding: 2rem 4rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }

        #begin-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(239, 68, 68, 0.4);
        }

        #true-button,
        #false-button {
            width: clamp(150px, 30vw, 250px);
            height: clamp(150px, 30vw, 250px);
            padding: 0;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            font-size: clamp(1.5rem, 5vw, 3rem);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        #true-button {
            background: linear-gradient(135deg, rgb(0, 255, 251), rgb(0, 200, 196));
            color: #000;
            box-shadow: 0 8px 20px rgba(0, 255, 251, 0.3);
        }

        #true-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(0, 255, 251, 0.4);
        }

        #false-button {
            background: linear-gradient(135deg, rgb(255, 31, 102), rgb(220, 20, 80));
            color: white;
            box-shadow: 0 8px 20px rgba(255, 31, 102, 0.3);
        }

        #false-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(255, 31, 102, 0.4);
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        #scroll-to-results {
            background-color: var(--rhyto-green);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 206, 124, 0.3);
            display: none;
        }

        #scroll-to-results:hover {
            background-color: var(--rhyto-green-hover);
            transform: scale(1.1);
        }

        /* ============================================
           PROGRESS BAR
           ============================================ */
        .progress {
            width: 100%;
            max-width: 800px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 50px;
            overflow: hidden;
            position: relative;
            margin: 2rem auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--rhyto-green), var(--rhyto-green-hover));
            height: 100%;
            transition: width 0.5s ease;
        }

        #quiz-progress-text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            font-size: 1.1rem;
            color: inherit;
        }

        /* ============================================
           RESULT CARDS
           ============================================ */
        #result-card-container {
            display: none;
            margin-top: 3rem;
        }

        #results-header {
            color: var(--rhyto-green);
            margin-bottom: 2rem;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            width: 100%;
            max-width: 22rem;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        body:not(.dark-mode) .result-card {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 206, 124, 0.2);
        }

        .result-card .card-img-top {
            height: auto;
            width: 100%;
            border-radius: 20px 20px 0 0;
        }

        .result-card .card-body {
            padding: 1.5rem;
        }

        .result-card input[type="checkbox"] {
            margin: 0 0.25rem;
        }

        .result-card input[type="checkbox"]:checked {
            background-color: var(--rhyto-green);
            border-color: var(--rhyto-green);
        }

        .info-icon {
            color: var(--rhyto-green);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .info-icon:hover {
            transform: scale(1.2);
        }

        /* ============================================
           MODALS
           ============================================ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            margin: 5% auto;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            position: relative;
            color: #f2f2f2;
        }

        body:not(.dark-mode) .modal-content {
            background: rgba(255, 255, 255, 0.95);
            color: #1a1a1a;
        }

        .modal-content h2 {
            color: var(--rhyto-green);
            margin-bottom: 1.5rem;
        }

        .modal-content ul {
            text-align: left;
            padding-left: 1.5rem;
            line-height: 1.8;
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            font-weight: 700;
            color: var(--rhyto-green);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-button:hover {
            transform: scale(1.2);
        }

        /* ============================================
           FOOTER
           ============================================ */
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */
        @media (max-width: 768px) {
            .back-button span {
                display: none;
            }

            .logo-center img {
                width: 50px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .question-card {
                padding: 2rem 1rem;
                min-height: 200px;
            }

            .grid-button {
                width: 38px;
                height: 38px;
                font-size: 0.8rem;
            }

            #begin-button {
                padding: 1.5rem 3rem;
            }

            .button-container {
                gap: 1rem;
            }

            .result-card {
                max-width: 95%;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0.5rem;
            }

            .header-container {
                margin-bottom: 1rem;
            }

            .grid-button {
                width: 32px;
                height: 32px;
                font-size: 0.75rem;
            }

            #question-grid {
                gap: 0.25rem;
            }
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .text-center {
            text-align: center;
        }

        #list-of-answers {
            display: none;
        }

        #question-hr {
            display: none;
            border-color: rgba(255, 255, 255, 0.2);
            margin: 2rem 0;
        }

        /* ============================================
           VIEW MODE TOGGLE
           ============================================ */
        .view-toggle-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1rem;
        }

        .view-toggle-wrapper i {
            font-size: 1.5rem;
            color: var(--rhyto-green);
        }

        /* ============================================
           MOBILE PORTRAIT MODE STYLES
           ============================================ */
        body.mobile-mode {
            padding: 0.5rem;
        }

        body.mobile-mode .header-container {
            margin-bottom: 0.75rem;
            padding: 0.5rem 0;
        }

        body.mobile-mode .back-button span {
            display: none;
        }

        body.mobile-mode .logo-center img {
            width: 40px;
        }

        body.mobile-mode h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        body.mobile-mode #why-benefit-header {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        body.mobile-mode #question-grid {
            gap: 0.25rem;
            margin-bottom: 1rem;
            padding: 0 0.5rem;
        }

        body.mobile-mode .grid-button {
            width: 28px;
            height: 28px;
            font-size: 0.65rem;
            border-width: 1px;
        }

        body.mobile-mode #question-number {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        body.mobile-mode .question-card {
            padding: 1rem 0.75rem;
            min-height: 120px;
            margin: 0.75rem auto;
            border-radius: 15px;
        }

        body.mobile-mode #question-text {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        body.mobile-mode #question-hr {
            margin: 0.75rem 0;
        }

        body.mobile-mode .button-container {
            gap: 0.75rem;
            margin: 1rem 0;
        }

        body.mobile-mode #true-button,
        body.mobile-mode #false-button {
            width: 120px;
            height: 120px;
            font-size: 1.2rem;
            border-radius: 15px;
        }

        body.mobile-mode #begin-button {
            font-size: 1.3rem;
            padding: 1.2rem 2.5rem;
        }

        body.mobile-mode .progress {
            height: 30px;
            margin: 1rem auto;
        }

        body.mobile-mode #quiz-progress-text {
            font-size: 0.9rem;
        }

        body.mobile-mode #scroll-to-results {
            width: 45px;
            height: 45px;
            font-size: 1.2rem;
        }

        body.mobile-mode footer {
            padding: 1rem 0;
            margin-top: 1.5rem;
            font-size: 0.8rem;
        }

        body.mobile-mode .theme-toggle-wrapper i,
        body.mobile-mode .view-toggle-wrapper i {
            font-size: 1rem;
        }

        body.mobile-mode .form-check-input {
            width: 2.5em;
            height: 1.25em;
        }

        /* Mobile mode results section */
        body.mobile-mode #result-card-container {
            margin-top: 1.5rem;
        }

        body.mobile-mode #results-header {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        body.mobile-mode .result-card {
            max-width: 100%;
            border-radius: 15px;
        }

        body.mobile-mode .result-card .card-body {
            padding: 1rem;
            font-size: 0.85rem;
        }

        body.mobile-mode .modal-content {
            margin: 10% auto;
            padding: 1.5rem;
            width: 95%;
        }
    </style>
</head>

<body class="dark-mode">
    <!-- Back to All Apps Navigation -->
    <a href="../index.html#apps" style="display:inline-flex;align-items:center;gap:0.4rem;padding:0.6rem 1rem;font-size:0.85rem;font-weight:500;color:#7A8B9C;text-decoration:none;position:fixed;top:1rem;left:1rem;z-index:100;transition:color 0.2s;" onmouseover="this.style.color='#00CE7C'" onmouseout="this.style.color='#7A8B9C'">
      <i class="fas fa-arrow-left" style="font-size:0.75rem;"></i> All Apps
    </a>

    <!-- Header -->
    <div class="header-container">
        <a href="../index.html" class="back-button" aria-label="Back to home">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            <span>Back to Home</span>
        </a>

        <div class="logo-center">
            <img src="../images/logo-icon.png" alt="RhytoLeaf Logo" onclick="showExitQuizModal()">
        </div>

        <div class="theme-toggle-wrapper">
            <i id="darkModeIcon" class="fas fa-sun"></i>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="darkModeToggle" checked aria-label="Toggle dark mode">
            </div>
        </div>

        <div class="view-toggle-wrapper">
            <i id="viewModeIcon" class="fas fa-desktop"></i>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="viewModeToggle" checked aria-label="Toggle view mode">
            </div>
        </div>
    </div>

    <div class="container-xxl">
        <!-- Title -->
        <h1>Style Under Stress</h1>
        <h3 id="why-benefit-header">Why?</h3>

        <!-- Question Grid -->
        <div id="question-grid"></div>

        <!-- Question Panel -->
        <div class="text-center">
            <hr id="question-hr">
            <h2 id="question-number"></h2>

            <div class="question-card">
                <p id="question-text">
                    Welcome!<br>
                    Please press "Begin" to start the quiz.<br>
                    (33 Questions)
                </p>
            </div>

            <!-- Answer Buttons -->
            <div class="button-container">
                <button id="true-button" onclick="pressTrue()" aria-label="Answer True">True</button>
                <button id="false-button" onclick="pressFalse()" aria-label="Answer False">False</button>
            </div>
        </div>

        <!-- Begin Button -->
        <div class="text-center my-3">
            <button id="begin-button" onclick="startQuiz()">Begin</button>
        </div>

        <!-- Debug -->
        <div id="list-of-answers">
            <h4>Answered True</h4>
            <p id="answered-true">[ ]</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress" role="progressbar" aria-label="Quiz progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div id="quiz-progress" class="progress-bar"></div>
            <span id="quiz-progress-text">0%</span>
        </div>

        <!-- Scroll to Results Button -->
        <div class="text-center" style="margin-top: 20px;">
            <button id="scroll-to-results" aria-label="Scroll to results">&#8595;</button>
        </div>

        <!-- Results Section -->
        <div id="result-card-container" class="text-center">
            <h2 id="results-header">Results</h2>

            <p>Your silence and violence scores give you a measure of how frequently you fall into these less-than-perfect strategies.</p>
            <p>These scores represent how you may typically behave during stressful or crucial conversations, but they can change.</p>

            <br>
            <b style="color: #ef4444;">Your score DOES NOT represent an inalterable character trait or a genetic propensity.</b>
            <p>It's merely a measure of your behavior and you can change that.</p>
            <br><br>

            <!-- Result Cards Row -->
            <div class="row g-4">
                <!-- Silence Card -->
                <div class="col-sm-12 col-md-6 d-flex flex-column align-items-center">
                    <h3 class="mb-3">Silence</h3>
                    <div class="result-card">
                        <img class="card-img-top" src="../images/silence.png" alt="Silence">
                        <div class="card-body">
                            <div id="masking-div">
                                <p>Masking <i class="fas fa-info-circle info-icon" data-category="masking"></i></p>
                                <input type="checkbox" id="q-5">
                                <input type="checkbox" id="q-6">
                                <p id="masking-pct">0%</p>
                            </div>
                            <hr>

                            <div id="avoiding-div">
                                <p>Avoiding <i class="fas fa-info-circle info-icon" data-category="avoiding"></i></p>
                                <input type="checkbox" id="q-3">
                                <input type="checkbox" id="q-4">
                                <p id="avoiding-pct">0%</p>
                            </div>
                            <hr>

                            <div id="withdrawing-div">
                                <p>Withdrawing <i class="fas fa-info-circle info-icon" data-category="withdrawing"></i></p>
                                <input type="checkbox" id="q-1">
                                <input type="checkbox" id="q-2">
                                <p id="withdrawing-pct">0%</p>
                            </div>
                            <hr>

                            <div id="heart-div">
                                <p>Start with the heart <i class="fas fa-info-circle info-icon" data-category="heart"></i></p>
                                <input type="checkbox" id="q-13">
                                <input type="checkbox" id="q-19">
                                <input type="checkbox" id="q-25">
                                <p id="heart-pct">0%</p>
                            </div>
                            <hr>

                            <div id="look-div">
                                <p>Learn to look <i class="fas fa-info-circle info-icon" data-category="look"></i></p>
                                <input type="checkbox" id="q-14">
                                <input type="checkbox" id="q-20">
                                <input type="checkbox" id="q-26">
                                <p id="look-pct">0%</p>
                            </div>
                            <hr>

                            <div id="safe-div">
                                <p>Make it safe <i class="fas fa-info-circle info-icon" data-category="safe"></i></p>
                                <input type="checkbox" id="q-15">
                                <input type="checkbox" id="q-21">
                                <input type="checkbox" id="q-27">
                                <p id="safe-pct">0%</p>
                            </div>
                            <hr>

                            <div id="stories-div">
                                <p>Master my stories <i class="fas fa-info-circle info-icon" data-category="stories"></i></p>
                                <input type="checkbox" id="q-16">
                                <input type="checkbox" id="q-22">
                                <input type="checkbox" id="q-28">
                                <p id="stories-pct">0%</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Violence Card -->
                <div class="col-sm-12 col-md-6 d-flex flex-column align-items-center">
                    <h3 class="mb-3">Violence</h3>
                    <div class="result-card">
                        <img class="card-img-top" src="../images/violence.png" alt="Violence">
                        <div class="card-body">
                            <div id="controlling-div">
                                <p>Controlling <i class="fas fa-info-circle info-icon" data-category="controlling"></i></p>
                                <input type="checkbox" id="q-7">
                                <input type="checkbox" id="q-8">
                                <p id="controlling-pct">0%</p>
                            </div>
                            <hr>

                            <div id="labeling-div">
                                <p>Labeling <i class="fas fa-info-circle info-icon" data-category="labeling"></i></p>
                                <input type="checkbox" id="q-9">
                                <input type="checkbox" id="q-10">
                                <p id="labeling-pct">0%</p>
                            </div>
                            <hr>

                            <div id="attacking-div">
                                <p>Attacking <i class="fas fa-info-circle info-icon" data-category="attacking"></i></p>
                                <input type="checkbox" id="q-11">
                                <input type="checkbox" id="q-12">
                                <p id="attacking-pct">0%</p>
                            </div>
                            <hr>

                            <div id="state-div">
                                <p>STATE my path <i class="fas fa-info-circle info-icon" data-category="state"></i></p>
                                <input type="checkbox" id="q-17">
                                <input type="checkbox" id="q-23">
                                <input type="checkbox" id="q-29">
                                <p id="state-pct">0%</p>
                            </div>
                            <hr>

                            <div id="explore-div">
                                <p>Explore Others' Paths <i class="fas fa-info-circle info-icon" data-category="explore"></i></p>
                                <input type="checkbox" id="q-18">
                                <input type="checkbox" id="q-24">
                                <input type="checkbox" id="q-30">
                                <p id="explore-pct">0%</p>
                            </div>
                            <hr>

                            <div id="action-div">
                                <p>Move to action <i class="fas fa-info-circle info-icon" data-category="action"></i></p>
                                <input type="checkbox" id="q-31">
                                <input type="checkbox" id="q-32">
                                <input type="checkbox" id="q-33">
                                <p id="action-pct">0%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <br><br>

            <!-- Conclusion -->
            <div id="conclusion">
                <p>Save and/or share results:</p>
                <button id="copy-results" class="btn btn-primary" style="background-color: var(--rhyto-green); border-color: var(--rhyto-green);">
                    <i class="fas fa-copy"></i> Copy
                </button>

                <br><br>

                <p>We have a tool that can help you:</p>
                <p><a href="https://www.amazon.ca/Crucial-Conversations-Talking-Stakes-Second/dp/0071771328"
                    target="_blank" rel="noopener noreferrer" style="color: var(--rhyto-green); font-weight: 600;">
                    Crucial Conversations
                </a></p>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
            <h3>Common Logical Fallacies:</h3>
            <ul id="modal-fallacies"></ul>
        </div>
    </div>

    <div id="exit-quiz-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Are you sure you want to exit the quiz?</h2>
            <p>Your progress will not be saved.</p>
            <button id="confirm-exit-button" class="btn btn-danger">Yes, exit</button>
            <button id="cancel-exit-button" class="btn btn-secondary">No, stay</button>
        </div>
    </div>

    <div id="why-benefit-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Why this quiz can benefit you</h2>
            <ul>
                <li>Understand your communication style under stress</li>
                <li>Improve relationships and achieve your goals</li>
                <li>Make conscious choices for more productive conversations</li>
            </ul>
            <p style="text-align: center; font-weight: bold;">Best of all, it's <span style="color: #ef4444;">FREE</span>!</p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Inspired by Crucial Conversation's various authors</p>
        <p>&copy; <span id="current-year"></span> RhytoLeaf Inc. All Rights Reserved</p>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
var answeredTrue = [];
var answeredFalse = [];
var currentQuestion = 0;
var questionStatus = new Array(33).fill(0);

var questionUpdateInterval = null;

function startQuiz() {
  document.getElementById("begin-button").style.display = "none";
  document.getElementById("true-button").style.display = "flex";
  document.getElementById("false-button").style.display = "flex";
  document.getElementById("question-hr").style.display = "block";

  const gridContainer = document.getElementById("question-grid");
  gridContainer.innerHTML = "";
  for (let i = 1; i <= 33; i++) {
    const button = document.createElement("button");
    button.innerHTML = i;
    button.id = `grid-btn-${i}`;
    button.classList.add("grid-button");
    button.addEventListener("click", () => jumpToQuestion(i));
    gridContainer.appendChild(button);
  }

  currentQuestion = 1;
  document.getElementById("question-text").innerHTML = questions[0];
  document.getElementById("question-number").innerHTML = 'Question 1';

  if (questionUpdateInterval) {
    clearInterval(questionUpdateInterval);
  }
  questionUpdateInterval = setInterval(updateQuestionPanel, 500);
}

function updateQuestionPanel() {
  $.ajax({
    url: window.location.href,
    method: 'GET',
    cache: false,
    success: function() {
      if (currentQuestion >= 1 && currentQuestion <= 33) {
        document.getElementById("question-text").innerHTML = questions[currentQuestion - 1];
        document.getElementById("question-number").innerHTML = 'Question ' + currentQuestion;
      }

      const answeredQuestions = questionStatus.filter(status => status !== 0).length;
      const percentage = (answeredQuestions / 33) * 100;
      document.getElementById("quiz-progress").style.width = percentage + "%";
      document.getElementById("quiz-progress-text").textContent = Math.round(percentage) + "%";
    }
  });
}

function setAnsweredTrueText() {
  document.getElementById("answered-true").innerHTML = answeredTrue.toString();
}

function setQuestionText() {
  setAnsweredTrueText();
  updateQuestionPanel();
}

function pressTrue() {
  questionStatus[currentQuestion - 1] = 1;
  document.getElementById(`grid-btn-${currentQuestion}`).classList.add('true');
  document.getElementById(`grid-btn-${currentQuestion}`).classList.remove('false');

  if (!answeredTrue.includes(currentQuestion)) {
    answeredTrue.push(currentQuestion);
  }

  answeredTrue.forEach(setCheckboxValueChecked);
  document.getElementById("q-"+currentQuestion).checked = true;
  findNextQuestion();
}

function pressFalse() {
  questionStatus[currentQuestion - 1] = 2;
  document.getElementById(`grid-btn-${currentQuestion}`).classList.add('false');
  document.getElementById(`grid-btn-${currentQuestion}`).classList.remove('true');

  const index = answeredTrue.indexOf(currentQuestion);
  if (index > -1) {
    answeredTrue.splice(index, 1);
  }
  document.getElementById("q-"+currentQuestion).checked = false;
  findNextQuestion();
}

function jumpToQuestion(questionNumber) {
  currentQuestion = questionNumber;
  setQuestionText();
}

function findNextQuestion() {
  let nextQuestion = questionStatus.indexOf(0);
  if (nextQuestion === -1) {
    const answeredQuestions = questionStatus.filter(status => status !== 0).length;
    const percentage = (answeredQuestions / 33) * 100;
    document.getElementById("quiz-progress").style.width = percentage + "%";
    document.getElementById("quiz-progress-text").textContent = Math.round(percentage) + "%";
    endQuiz();
  } else {
    currentQuestion = nextQuestion + 1;
    setQuestionText();
  }
}

function setCheckboxValueChecked(id) {
  $('#q-' + id).prop('checked', true);
}

function endQuiz() {
  if (questionUpdateInterval) {
    clearInterval(questionUpdateInterval);
    questionUpdateInterval = null;
  }

  document.getElementById("begin-button").style.display = "none";
  document.getElementById("true-button").style.display = "none";
  document.getElementById("false-button").style.display = "none";
  document.getElementById("question-hr").style.display = "none";
  document.getElementById("question-text").innerHTML = "Please see your results below:";

  calculateResults();
  document.getElementById("result-card-container").style.display = "block";

  const resultCheckboxes = document.querySelectorAll("#result-card-container input[type='checkbox']");
  resultCheckboxes.forEach(checkbox => {
    checkbox.disabled = true;
  });

  document.getElementById("scroll-to-results").style.display = "block";
}

function calculateResults() {
  document.getElementById("result-card-container").style.display = "block";

  document.getElementById("masking-pct").innerHTML = calculatePCT("masking");
  document.getElementById("avoiding-pct").innerHTML = calculatePCT('avoiding');
  document.getElementById("withdrawing-pct").innerHTML = calculatePCT('withdrawing');
  document.getElementById("heart-pct").innerHTML = calculatePCT('heart');
  document.getElementById("look-pct").innerHTML = calculatePCT('look');
  document.getElementById("safe-pct").innerHTML = calculatePCT('safe');
  document.getElementById("stories-pct").innerHTML = calculatePCT('stories');
  document.getElementById("controlling-pct").innerHTML = calculatePCT('controlling');
  document.getElementById("labeling-pct").innerHTML = calculatePCT('labeling');
  document.getElementById("attacking-pct").innerHTML = calculatePCT('attacking');
  document.getElementById("state-pct").innerHTML = calculatePCT('state');
  document.getElementById("explore-pct").innerHTML = calculatePCT('explore');
  document.getElementById("action-pct").innerHTML = calculatePCT('action');
}

function calculatePCT(category) {
  const $div = $('#' + category + '-div');
  const count = $div.find('input:checked').length;
  const total = $div.find('input').length;
  var pct = (count / total) * 100;

  if(pct < 34) return 'Unlikely';
  if(pct >= 50) return 'Fairly often';
  return pct + '%';
}

const inputs = document.querySelectorAll("input");
inputs.forEach(input => {
  input.addEventListener("change", function() {
    if (this.checked) {
      this.setAttribute("checked", true);
    } else {
      this.removeAttribute("checked");
    }
    calculatePCT(this.parentElement.id.split("-")[0]);
  });
});

const questions = [
  "At times I avoid situations that might bring me into contact with people I'm having problems with.",
  "I have put off returning phone calls or emails because I simply didn't want to deal with the person who sent them.",
  "Sometimes when people bring up a touchy or awkward issue, I try to change the subject.",
  "When it comes to dealing with awkward or stressful subjects, sometimes I hold back rather than give my full and candid opinion.",
  "Rather than tell people exactly what I think, sometimes I rely on jokes, sarcasm, or snide remarks to let them know I'm frustrated.",
  "When I've got something tough to bring up, sometimes I offer weak or insincere compliments to soften the blow.",
  "In order to get my point across, I sometimes exaggerate my side of the argument.",
  "If I seem to be losing control of a conversation, I might cut people off or change the subject in order to bring it back to where I think it should be.",
  "When others make points that seem stupid to me, I sometimes let them know it without holding back at all.",
  "When I'm stunned by a comment, sometimes I say things that others might take as forceful or attacking comments such as 'Give me a break!' or 'That's ridiculous!'",
  "Sometimes when things get heated, I move from arguing against others' points to saying things that might hurt them personally.",
  "If I get into a heated discussion, I've been known to be tough on the other person. In fact, the person might feel a bit insulted or hurt.",
  "When I'm discussing an important topic with others, sometimes I move from trying to make my point to trying to win the battle.",
  "In the middle of a tough conversation, I often get so caught up in arguments that I don't see how I'm coming across to others.",
  "When talking gets tough and I do something hurtful, I'm quick to apologize for mistakes.",
  "When I think about a conversation that took a bad turn, I tend to focus first on what I did that was wrong rather than focus on others' mistakes.",
  "When I've got something to say that others might not want to hear, I avoid starting out with tough conclusions, and instead start with facts that help them understand where I'm coming from.",
  "I can tell very quickly when others are holding back or feeling defensive in a conversation.",
  "Sometimes I decide that it's better not to give harsh feedback because I know that it's bound to cause real problems.",
  "When conversations aren't working, I step back from the fray, think about what's happening, and take steps to make it better.",
  "When others get defensive because they misunderstand me, I quickly get us back on track by clarifying what I do and don't mean.",
  "There are some people I'm rough on because, to be honest, they need or deserve what I give them",
  "I sometimes make absolute statements like 'The fact is ___' or 'It's obvious that ___' to be sure I get my point across.",
  "If others hesitate to share their views, I sincerely invite them to say what's on their mind, no matter what it is.",
  "At times I argue hard for my view--hoping to keep others from bringing up opinions that would be a waste of energy to discuss.",
  "Even when things get tense, I adapt quickly to how others are responding to me and try a new strategy.",
  "When I find that I'm at cross-purposes with someone, I often keep trying to win my way rather than looking for common ground.",
  "When things don't go well, I'm more inclined to see the mistakes others made than notice my own role.",
  "After I share strong opinions, I go out of my way to invite others to share their views, particularly opposing ones.",
  "When others hesitate to share their views, I do whatever I can to make it safe for them to speak honestly.",
  "Sometimes I have to discuss things I thought had been settled because I don't keep track of what was discussed before.",
  "I find myself in situations where people get their feelings hurt because they thought they would have more of a say in final decisions than they end up having.",
  "I get frustrated sometimes at how long it takes some groups to make decisions because too many people are involved.",
];
    </script>

    <script>
document.getElementById("scroll-to-results").addEventListener("click", function() {
    document.getElementById("results-header").scrollIntoView({ behavior: 'smooth' });
});
    </script>

    <script>
const fallacyDescriptions = {
    "Straw Man": "Misrepresenting or exaggerating an opponent's argument to make it easier to attack.",
    "Equivocation": "Using a word or phrase with multiple meanings to mislead or create confusion.",
    "Red Herring": "Introducing an irrelevant topic into an argument to divert attention from the main issue.",
    "Changing the Subject": "Similar to a red herring, this is a deliberate shift of the discussion to a different topic to avoid the original point.",
    "Appeal to Emotion (Silence)": "Using emotional appeals to avoid addressing the issue at hand.",
    "Argument from Ignorance": "Claiming something is true because it hasn't been proven false, or vice versa.",
    "Appeal to Force": "Using threats, coercion, or intimidation to force acceptance of an argument.",
    "Ad Hominem": "Attacking the person making the argument rather than the argument itself.",
    "Genetic Fallacy": "Dismissing or validating an argument based on its source or origin, rather than its content.",
    "Appeal to Spite": "Using spite or ill will to support or reject a claim, rather than logic."
};

const categoryInfo = {
    masking: {
        title: "Masking (Silence)",
        description: "Understating or selectively showing your true opinions. Sarcasm, sugarcoating, and couching are common forms of masking.",
        fallacies: ["Straw Man", "Equivocation"]
    },
    avoiding: {
        title: "Avoiding (Silence)",
        description: "Steering completely away from sensitive subjects. You talk, but without addressing the real issues.",
        fallacies: ["Red Herring", "Changing the Subject"]
    },
    withdrawing: {
        title: "Withdrawing (Silence)",
        description: "Pulling out of a conversation completely. You either exit the conversation or exit the room.",
        fallacies: ["Appeal to Emotion (Silence)", "Argument from Ignorance"]
    },
    heart: {
        title: "Start with the Heart",
        description: "This is a healthy communication skill. It means staying focused on what you really want, and not getting sidetracked by wanting to win, punish, or keep the peace.",
        fallacies: []
    },
    look: {
        title: "Learn to Look",
        description: "This is a healthy communication skill. It means paying attention to when a conversation becomes crucial, and recognizing when safety is at risk.",
        fallacies: []
    },
    safe: {
        title: "Make it Safe",
        description: "This is a healthy communication skill. It means creating an environment of mutual respect and purpose where everyone feels comfortable contributing.",
        fallacies: []
    },
    stories: {
        title: "Master My Stories",
        description: "This is a healthy communication skill. It means managing your own emotions and the narratives you create about others.",
        fallacies: []
    },
    controlling: {
        title: "Controlling (Violence)",
        description: "Coercing others to your way of thinking. You might do this by either forcing your views on others or dominating the conversation.",
        fallacies: ["Appeal to Force", "Ad Hominem"]
    },
    labeling: {
        title: "Labeling (Violence)",
        description: "Dismissing someone by attaching a label to them. This is a way of stereotyping or categorizing people so you can dismiss them.",
        fallacies: ["Ad Hominem", "Genetic Fallacy"]
    },
    attacking: {
        title: "Attacking (Violence)",
        description: "You move from winning the argument to making the other person suffer. Tactics include belittling and threatening.",
        fallacies: ["Ad Hominem", "Appeal to Spite"]
    },
    state: {
        title: "STATE My Path",
        description: "This is a healthy communication skill. It's a set of skills for sharing your views, even when they are controversial or unpopular.",
        fallacies: []
    },
    explore: {
        title: "Explore Others' Paths",
        description: "This is a healthy communication skill. It means actively listening to and understanding others' perspectives.",
        fallacies: []
    },
    action: {
        title: "Move to Action",
        description: "This is a healthy communication skill. It means translating discussions into clear decisions and commitments.",
        fallacies: []
    }
};

const modal = document.getElementById("info-modal");
const modalTitle = document.getElementById("modal-title");
const modalDescription = document.getElementById("modal-description");
const modalFallacies = document.getElementById("modal-fallacies");

document.querySelectorAll(".info-icon").forEach(icon => {
    icon.addEventListener("click", function() {
        const category = this.dataset.category;
        const info = categoryInfo[category];

        modalTitle.textContent = info.title;
        modalDescription.textContent = info.description;

        modalFallacies.innerHTML = "";
        if (info.fallacies.length === 0) {
            const li = document.createElement("li");
            li.textContent = "None";
            modalFallacies.appendChild(li);
        } else {
            info.fallacies.forEach(fallacy => {
                const li = document.createElement("li");
                li.innerHTML = `<b>${fallacy}:</b> ${fallacyDescriptions[fallacy]}`;
                modalFallacies.appendChild(li);
            });
        }

        modal.style.display = "block";
    });
});

document.querySelectorAll(".close-button").forEach(btn => {
    btn.addEventListener("click", function() {
        this.closest(".modal").style.display = "none";
    });
});

window.addEventListener("click", function(event) {
    if (event.target.classList.contains("modal")) {
        event.target.style.display = "none";
    }
});
    </script>

    <script>
document.getElementById("copy-results").addEventListener("click", function() {
    let resultsText = "Style Under Stress Test Results\n\n";
    resultsText += "***Your score DOES NOT represent an inalterable character trait or a genetic propensity. It's merely a measure of your behavior and you can change that.***\n\n";

    resultsText += "--- SILENCE ---\n\n";
    resultsText += "Masking: " + document.getElementById("masking-pct").textContent + "\n";
    resultsText += categoryInfo.masking.description + "\n\n";
    resultsText += "Avoiding: " + document.getElementById("avoiding-pct").textContent + "\n";
    resultsText += categoryInfo.avoiding.description + "\n\n";
    resultsText += "Withdrawing: " + document.getElementById("withdrawing-pct").textContent + "\n";
    resultsText += categoryInfo.withdrawing.description + "\n\n";

    resultsText += "--- VIOLENCE ---\n\n";
    resultsText += "Controlling: " + document.getElementById("controlling-pct").textContent + "\n";
    resultsText += categoryInfo.controlling.description + "\n\n";
    resultsText += "Labeling: " + document.getElementById("labeling-pct").textContent + "\n";
    resultsText += categoryInfo.labeling.description + "\n\n";
    resultsText += "Attacking: " + document.getElementById("attacking-pct").textContent + "\n";
    resultsText += categoryInfo.attacking.description + "\n\n";

    resultsText += "--- HEALTHY COMMUNICATION ---\n\n";
    resultsText += "Start with the heart: " + document.getElementById("heart-pct").textContent + "\n";
    resultsText += categoryInfo.heart.description + "\n\n";
    resultsText += "Learn to look: " + document.getElementById("look-pct").textContent + "\n";
    resultsText += categoryInfo.look.description + "\n\n";
    resultsText += "Make it safe: " + document.getElementById("safe-pct").textContent + "\n";
    resultsText += categoryInfo.safe.description + "\n\n";
    resultsText += "Master my stories: " + document.getElementById("stories-pct").textContent + "\n";
    resultsText += categoryInfo.stories.description + "\n\n";
    resultsText += "STATE my path: " + document.getElementById("state-pct").textContent + "\n";
    resultsText += categoryInfo.state.description + "\n\n";
    resultsText += "Explore Others' Paths: " + document.getElementById("explore-pct").textContent + "\n";
    resultsText += categoryInfo.explore.description + "\n\n";
    resultsText += "Move to action: " + document.getElementById("action-pct").textContent + "\n";
    resultsText += categoryInfo.action.description + "\n\n";

    navigator.clipboard.writeText(resultsText).then(function() {
        alert("Results copied to clipboard!");
    }, function(err) {
        alert("Could not copy results to clipboard.");
    });
});
    </script>

    <script>
const darkModeToggle = document.getElementById('darkModeToggle');
const body = document.body;
const darkModeIcon = document.getElementById('darkModeIcon');

function setDarkModeIcon() {
    if (body.classList.contains('dark-mode')) {
        darkModeIcon.classList.remove('fa-moon');
        darkModeIcon.classList.add('fa-sun');
    } else {
        darkModeIcon.classList.remove('fa-sun');
        darkModeIcon.classList.add('fa-moon');
    }
}

if (localStorage.getItem('darkMode') === null) {
    localStorage.setItem('darkMode', 'enabled');
    body.classList.add('dark-mode');
    darkModeToggle.checked = true;
} else if (localStorage.getItem('darkMode') === 'enabled') {
    body.classList.add('dark-mode');
    darkModeToggle.checked = true;
} else {
    body.classList.remove('dark-mode');
    darkModeToggle.checked = false;
}
setDarkModeIcon();

darkModeToggle.addEventListener('change', () => {
    if (darkModeToggle.checked) {
        body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'enabled');
    } else {
        body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'disabled');
    }
    setDarkModeIcon();
});
    </script>

    <script>
const whyBenefitModal = document.getElementById("why-benefit-modal");
const whyBenefitHeader = document.getElementById("why-benefit-header");

whyBenefitHeader.addEventListener("click", function() {
    whyBenefitModal.style.display = "block";
});
    </script>

    <script>
const exitQuizModal = document.getElementById("exit-quiz-modal");
const confirmExitButton = document.getElementById("confirm-exit-button");
const cancelExitButton = document.getElementById("cancel-exit-button");

function showExitQuizModal() {
    exitQuizModal.style.display = "block";
}

confirmExitButton.addEventListener("click", function() {
    window.location.href = "index.html";
});

cancelExitButton.addEventListener("click", function() {
    exitQuizModal.style.display = "none";
});
    </script>

    <script>
document.getElementById("current-year").textContent = new Date().getFullYear();
    </script>

    <script>
const viewModeToggle = document.getElementById('viewModeToggle');
const viewModeIcon = document.getElementById('viewModeIcon');

function setViewModeUI() {
    if (document.body.classList.contains('mobile-mode')) {
        viewModeIcon.classList.remove('fa-desktop');
        viewModeIcon.classList.add('fa-mobile-alt');
        viewModeToggle.checked = false;
    } else {
        viewModeIcon.classList.remove('fa-mobile-alt');
        viewModeIcon.classList.add('fa-desktop');
        viewModeToggle.checked = true;
    }
}

if (localStorage.getItem('viewMode') === 'mobile') {
    document.body.classList.add('mobile-mode');
    viewModeToggle.checked = false;
} else {
    document.body.classList.remove('mobile-mode');
    viewModeToggle.checked = true;
}
setViewModeUI();

viewModeToggle.addEventListener('change', () => {
    if (viewModeToggle.checked) {
        document.body.classList.remove('mobile-mode');
        localStorage.setItem('viewMode', 'desktop');
    } else {
        document.body.classList.add('mobile-mode');
        localStorage.setItem('viewMode', 'mobile');
    }
    setViewModeUI();
});
    </script>
</body>
</html>
