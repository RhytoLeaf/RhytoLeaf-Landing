<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Style Under Stress - Crucial Conversations quiz to assess your communication patterns during stressful situations.">
    <link rel="canonical" href="https://rhytoleaf.ca/apps/style-under-stress.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Style Under Stress">
    <meta property="og:description" content="Assess your communication patterns during stressful conversations. Take the Crucial Conversations quiz.">
    <meta property="og:image" content="https://rhytoleaf.ca/images/styleunderstress-logo.jpg">
    <meta property="og:url" content="https://rhytoleaf.ca/apps/style-under-stress.html">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Style Under Stress">
    <meta name="twitter:description" content="Assess your communication patterns during stressful conversations.">
    <meta name="twitter:image" content="https://rhytoleaf.ca/images/styleunderstress-logo.jpg">
    <meta property="twitter:url" content="https://rhytoleaf.ca/apps/style-under-stress.html">

    <title>Style Under Stress</title>

    <link rel="icon" href="../images/logo-icon.png" type="image/png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* ============================================
           CSS VARIABLES
           ============================================ */
        :root {
            /* Logo palette */
            --bg-deep:      #0D2B30;
            --bg-mid:       #112F35;
            --bg-card:      #0F353C;
            --accent-teal:  #2E7B7C;
            --accent-teal2: #1F5A5B;
            --accent-green: #5B8A3C;
            --accent-olive: #7A8C2E;
            --accent-brown: #6B4A3C;
            --accent-cream: #E8D4A8;

            /* Functional */
            --true-color:   #2E7B7C;
            --true-dark:    #1F5A5B;
            --false-color:  #C0392B;
            --false-dark:   #A93226;
            --begin-color:  #C0392B;
            --begin-dark:   #A93226;

            /* Text */
            --text-primary:   #EEE8D6;
            --text-secondary: #A8C0B8;
            --text-muted:     #6A8A84;

            /* Borders */
            --border-subtle:  rgba(46, 123, 124, 0.2);
            --border-card:    rgba(46, 123, 124, 0.3);

            /* Header */
            --header-height: 64px;
        }

        /* ============================================
           RESET & BASE
           ============================================ */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-deep);
            background-image:
                radial-gradient(ellipse at 20% 10%, rgba(46, 123, 124, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 90%, rgba(91, 138, 60, 0.08) 0%, transparent 45%);
            background-attachment: fixed;
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           STICKY HEADER
           ============================================ */
        .site-header {
            position: sticky;
            top: 0;
            z-index: 200;
            height: var(--header-height);
            background: rgba(13, 43, 48, 0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid var(--border-card);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.25rem;
            gap: 1rem;
        }

        /* Left: Back button */
        .header-back {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 600;
            padding: 0.4rem 0.75rem;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: rgba(46, 123, 124, 0.08);
            transition: all 0.2s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .header-back:hover {
            color: var(--accent-cream);
            border-color: var(--accent-teal);
            background: rgba(46, 123, 124, 0.18);
        }

        .header-back i {
            font-size: 0.75rem;
        }

        /* Center: App logo + title */
        .header-center {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            flex: 1;
            justify-content: center;
            min-width: 0;
            overflow: hidden;
        }

        .header-app-logo {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .header-app-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Right: RhytoLeaf logo (links home, triggers exit modal during quiz) */
        .header-right {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .header-home-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: rgba(46, 123, 124, 0.08);
            transition: all 0.2s ease;
            cursor: pointer;
            text-decoration: none;
        }

        .header-home-btn:hover {
            border-color: var(--accent-teal);
            background: rgba(46, 123, 124, 0.18);
        }

        .header-home-btn img {
            width: 24px;
            height: 24px;
            object-fit: contain;
            border-radius: 4px;
        }

        /* ============================================
           MAIN CONTENT WRAPPER
           ============================================ */
        .main-content {
            max-width: 960px;
            margin: 0 auto;
            padding: 2rem 1.25rem 3rem;
        }

        /* ============================================
           PAGE HERO (logo + title + subtitle)
           ============================================ */
        .page-hero {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .app-logo-hero {
            width: 64px;
            height: 64px;
            border-radius: 14px;
            object-fit: cover;
            margin-bottom: 1rem;
            box-shadow: 0 4px 20px rgba(46, 123, 124, 0.4);
        }

        .page-hero h1 {
            font-size: clamp(2rem, 5vw, 3.2rem);
            font-weight: 700;
            color: var(--accent-teal);
            margin-bottom: 0.4rem;
            letter-spacing: -0.02em;
        }

        #why-benefit-header {
            display: inline-block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--accent-green);
            cursor: pointer;
            text-decoration: underline;
            text-underline-offset: 3px;
            transition: opacity 0.2s ease;
        }

        #why-benefit-header:hover {
            opacity: 0.75;
        }

        /* ============================================
           QUESTION GRID
           ============================================ */
        #question-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.45rem;
            margin-bottom: 1.75rem;
        }

        .grid-button {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid var(--border-card);
            background: rgba(46, 123, 124, 0.1);
            color: var(--text-secondary);
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease;
        }

        .grid-button:hover {
            transform: scale(1.12);
            border-color: var(--accent-teal);
            color: var(--text-primary);
        }

        .grid-button.true {
            background: rgba(46, 123, 124, 0.75);
            border-color: var(--accent-teal);
            color: #fff;
        }

        .grid-button.false {
            background: rgba(192, 57, 43, 0.75);
            border-color: var(--false-color);
            color: #fff;
        }

        /* ============================================
           QUESTION PANEL
           ============================================ */
        #question-hr {
            display: none;
            border: none;
            border-top: 1px solid var(--border-card);
            margin: 0 0 1.75rem;
        }

        #question-number {
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 700;
            color: var(--accent-green);
            text-align: center;
            margin-bottom: 1rem;
        }

        .question-card {
            background: var(--bg-card);
            border: 1px solid var(--border-card);
            border-radius: 18px;
            padding: 2rem 1.75rem;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            max-width: 820px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.25);
        }

        #question-text {
            text-align: center;
            font-size: clamp(1rem, 2.2vw, 1.35rem);
            line-height: 1.65;
            color: var(--text-primary);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* ============================================
           ANSWER BUTTONS
           ============================================ */
        .button-container {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 0 0 1.5rem;
            flex-wrap: wrap;
        }

        #true-button,
        #false-button {
            display: none;
            justify-content: center;
            align-items: center;
            width: clamp(130px, 28vw, 220px);
            height: clamp(130px, 28vw, 220px);
            border-radius: 18px;
            border: none;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: clamp(1.3rem, 4vw, 2.5rem);
            text-transform: uppercase;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            letter-spacing: 0.04em;
        }

        #true-button {
            background: linear-gradient(135deg, var(--true-color), var(--true-dark));
            color: #fff;
            box-shadow: 0 6px 20px rgba(46, 123, 124, 0.35);
        }

        #true-button:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 10px 28px rgba(46, 123, 124, 0.5);
        }

        #false-button {
            background: linear-gradient(135deg, var(--false-color), var(--false-dark));
            color: #fff;
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.35);
        }

        #false-button:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 10px 28px rgba(192, 57, 43, 0.5);
        }

        /* Begin Button */
        #begin-button {
            background: linear-gradient(135deg, var(--begin-color), var(--begin-dark));
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(1.3rem, 3.5vw, 2rem);
            font-weight: 700;
            padding: 1.5rem 4rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 20px rgba(192, 57, 43, 0.35);
            letter-spacing: 0.04em;
        }

        #begin-button:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 10px 28px rgba(192, 57, 43, 0.5);
        }

        /* Debug (hidden) */
        #list-of-answers {
            display: none;
        }

        /* ============================================
           PROGRESS BAR
           ============================================ */
        .progress-wrap {
            max-width: 820px;
            margin: 0 auto 1.25rem;
        }

        .progress {
            width: 100%;
            height: 38px;
            background: rgba(46, 123, 124, 0.12);
            border: 1px solid var(--border-card);
            border-radius: 50px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--accent-teal), var(--accent-green));
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 50px;
        }

        #quiz-progress-text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            font-size: 1rem;
            color: var(--text-primary);
            pointer-events: none;
        }

        /* Scroll to results */
        .scroll-btn-wrap {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        #scroll-to-results {
            display: none;
            background: var(--accent-teal);
            border: none;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            color: #fff;
            font-size: 1.4rem;
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease;
            box-shadow: 0 4px 14px rgba(46, 123, 124, 0.4);
        }

        #scroll-to-results:hover {
            background: var(--accent-teal2);
            transform: scale(1.1);
        }

        /* ============================================
           RESULTS SECTION
           ============================================ */
        #result-card-container {
            display: none;
            margin-top: 3rem;
            text-align: center;
        }

        #results-header {
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 700;
            color: var(--accent-teal);
            margin-bottom: 1.5rem;
        }

        #result-card-container > p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 0.5rem;
            max-width: 680px;
            margin-left: auto;
            margin-right: auto;
        }

        .score-warning {
            color: var(--false-color);
            font-weight: 700;
            margin: 1rem auto;
            max-width: 680px;
            font-size: 0.95rem;
        }

        /* Result Cards Grid */
        .result-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .result-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
        }

        .result-column h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .result-card {
            background: var(--bg-card);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            width: 100%;
            max-width: 380px;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 18px rgba(0, 0, 0, 0.25);
        }

        .result-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 32px rgba(46, 123, 124, 0.25);
        }

        .result-card .card-img-top {
            width: 100%;
            height: auto;
            display: block;
        }

        .result-card .card-body {
            padding: 1.25rem 1.5rem;
        }

        /* Category rows inside cards */
        .category-row {
            padding: 0.65rem 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .category-row:last-child {
            border-bottom: none;
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.4rem;
        }

        .category-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .category-pct {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent-teal);
            background: rgba(46, 123, 124, 0.12);
            padding: 0.15rem 0.5rem;
            border-radius: 20px;
            min-width: 70px;
            text-align: center;
        }

        .category-checks {
            display: flex;
            gap: 0.35rem;
            align-items: center;
        }

        /* Custom checkboxes */
        .result-card input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--border-card);
            background: rgba(46, 123, 124, 0.08);
            cursor: default;
            transition: background 0.2s ease, border-color 0.2s ease;
            flex-shrink: 0;
            position: relative;
        }

        .result-card input[type="checkbox"]:checked {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .result-card input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            left: 3px;
            top: 1px;
            width: 8px;
            height: 5px;
            border-left: 2px solid #fff;
            border-bottom: 2px solid #fff;
            transform: rotate(-45deg);
        }

        .info-icon {
            color: var(--accent-teal);
            cursor: pointer;
            transition: transform 0.2s ease, color 0.2s ease;
            font-size: 0.85rem;
        }

        .info-icon:hover {
            transform: scale(1.2);
            color: var(--accent-cream);
        }

        /* Conclusion block */
        #conclusion {
            margin-top: 2.5rem;
            padding: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            max-width: 520px;
            margin-left: auto;
            margin-right: auto;
        }

        #conclusion p {
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        #copy-results {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-teal), var(--accent-teal2));
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0.6rem 1.4rem;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-bottom: 0.5rem;
        }

        #copy-results:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 14px rgba(46, 123, 124, 0.4);
        }

        #conclusion a {
            color: var(--accent-green);
            font-weight: 700;
            text-decoration: underline;
            text-underline-offset: 3px;
            transition: opacity 0.2s;
        }

        #conclusion a:hover {
            opacity: 0.75;
        }

        /* ============================================
           MODALS
           ============================================ */
        .modal {
            display: none;
            position: fixed;
            z-index: 500;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            overflow-y: auto;
            padding: 2rem 1rem;
        }

        .modal-content {
            background: #0D3038;
            border: 1px solid var(--border-card);
            border-radius: 18px;
            padding: 2rem 1.75rem;
            max-width: 580px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            color: var(--text-primary);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-content h2 {
            color: var(--accent-teal);
            font-size: 1.4rem;
            margin-bottom: 1rem;
            text-align: left;
            padding-right: 2rem;
        }

        .modal-content p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .modal-content h3 {
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 0.6rem;
            text-align: left;
        }

        .modal-content ul {
            text-align: left;
            padding-left: 1.25rem;
            line-height: 1.85;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .modal-content ul li {
            margin-bottom: 0.4rem;
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1.25rem;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            line-height: 1;
            transition: color 0.2s ease;
        }

        .close-button:hover {
            color: var(--accent-teal);
        }

        /* Exit modal specific buttons */
        #confirm-exit-button,
        #cancel-exit-button {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.55rem 1.3rem;
            border: none;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            margin-right: 0.5rem;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        #confirm-exit-button {
            background: linear-gradient(135deg, var(--false-color), var(--false-dark));
            color: #fff;
        }

        #confirm-exit-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(192, 57, 43, 0.4);
        }

        #cancel-exit-button {
            background: rgba(46, 123, 124, 0.15);
            color: var(--text-secondary);
            border: 1px solid var(--border-card);
        }

        #cancel-exit-button:hover {
            background: rgba(46, 123, 124, 0.25);
            color: var(--text-primary);
        }

        /* ============================================
           FOOTER
           ============================================ */
        footer {
            text-align: center;
            padding: 2rem 1.25rem;
            margin-top: 1rem;
            border-top: 1px solid var(--border-subtle);
            color: var(--text-muted);
            font-size: 0.82rem;
            line-height: 1.8;
        }

        footer p + p {
            margin-top: 0.25rem;
        }

        /* ============================================
           UTILITIES
           ============================================ */
        .text-center { text-align: center; }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 600px) {
            .main-content {
                padding: 1.25rem 1rem 2.5rem;
            }

            .header-back span {
                display: none;
            }

            .header-app-title {
                font-size: 0.9rem;
            }

            .page-hero {
                margin-bottom: 1.5rem;
            }

            .grid-button {
                width: 36px;
                height: 36px;
                font-size: 0.75rem;
            }

            #question-grid {
                gap: 0.3rem;
            }

            .question-card {
                padding: 1.5rem 1rem;
                min-height: 150px;
            }

            #begin-button {
                padding: 1.2rem 2.5rem;
            }

            .button-container {
                gap: 1rem;
            }

            .result-cards-grid {
                grid-template-columns: 1fr;
            }

            .result-card {
                max-width: 100%;
            }

            .modal-content {
                padding: 1.5rem 1.25rem;
            }
        }

        @media (max-width: 400px) {
            .grid-button {
                width: 30px;
                height: 30px;
                font-size: 0.68rem;
            }

            #question-grid {
                gap: 0.2rem;
            }

            #true-button,
            #false-button {
                width: 115px;
                height: 115px;
                font-size: 1.2rem;
                border-radius: 14px;
            }
        }
    </style>
</head>

<body>
    <!-- Sticky Header -->
    <header class="site-header">
        <!-- Left: Back to All Apps -->
        <a href="../index.html#apps" class="header-back" aria-label="Back to all apps">
            <i class="fas fa-arrow-left"></i>
            <span>All Apps</span>
        </a>

        <!-- Center: App logo + name -->
        <div class="header-center">
            <img src="../images/styleunderstress-logo.jpg" alt="Style Under Stress logo" class="header-app-logo">
            <span class="header-app-title">Style Under Stress</span>
        </div>

        <!-- Right: RhytoLeaf home button (triggers exit modal if quiz active) -->
        <div class="header-right">
            <button class="header-home-btn" id="home-btn" aria-label="Back to RhytoLeaf home" onclick="handleHomeClick()">
                <img src="../images/logo-icon.png" alt="RhytoLeaf">
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">

        <!-- Page Hero -->
        <div class="page-hero">
            <img src="../images/styleunderstress-logo.jpg" alt="Style Under Stress" class="app-logo-hero">
            <h1>Style Under Stress</h1>
            <span id="why-benefit-header">Why take this quiz?</span>
        </div>

        <!-- Question Grid (populated by JS) -->
        <div id="question-grid"></div>

        <!-- Question Panel -->
        <div class="text-center">
            <hr id="question-hr">
            <h2 id="question-number"></h2>

            <div class="question-card">
                <p id="question-text">
                    Welcome!<br>
                    Please press "Begin" to start the quiz.<br>
                    (33 Questions)
                </p>
            </div>

            <!-- True / False Buttons -->
            <div class="button-container">
                <button id="true-button" onclick="pressTrue()" aria-label="Answer True">True</button>
                <button id="false-button" onclick="pressFalse()" aria-label="Answer False">False</button>
            </div>
        </div>

        <!-- Begin Button -->
        <div class="text-center" style="margin-bottom:1.5rem;">
            <button id="begin-button" onclick="startQuiz()">Begin</button>
        </div>

        <!-- Debug (hidden) -->
        <div id="list-of-answers">
            <h4>Answered True</h4>
            <p id="answered-true">[ ]</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-wrap">
            <div class="progress" role="progressbar" aria-label="Quiz progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div id="quiz-progress" class="progress-bar"></div>
                <span id="quiz-progress-text">0%</span>
            </div>
        </div>

        <!-- Scroll to Results -->
        <div class="scroll-btn-wrap">
            <button id="scroll-to-results" aria-label="Scroll to results">&#8595;</button>
        </div>

        <!-- Results Section -->
        <div id="result-card-container">
            <h2 id="results-header">Results</h2>

            <p>Your silence and violence scores give you a measure of how frequently you fall into these less-than-perfect strategies.</p>
            <p>These scores represent how you may typically behave during stressful or crucial conversations, but they can change.</p>

            <p class="score-warning">Your score DOES NOT represent an inalterable character trait or a genetic propensity.</p>
            <p>It's merely a measure of your behavior and you can change that.</p>

            <!-- Cards Row -->
            <div class="result-cards-grid">
                <!-- Silence Card -->
                <div class="result-column">
                    <h3>Silence</h3>
                    <div class="result-card">
                        <img class="card-img-top" src="../images/silence.png" alt="Silence">
                        <div class="card-body">
                            <!-- Masking -->
                            <div id="masking-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Masking
                                        <i class="fas fa-info-circle info-icon" data-category="masking"></i>
                                    </span>
                                    <span class="category-pct" id="masking-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-5">
                                    <input type="checkbox" id="q-6">
                                </div>
                            </div>

                            <!-- Avoiding -->
                            <div id="avoiding-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Avoiding
                                        <i class="fas fa-info-circle info-icon" data-category="avoiding"></i>
                                    </span>
                                    <span class="category-pct" id="avoiding-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-3">
                                    <input type="checkbox" id="q-4">
                                </div>
                            </div>

                            <!-- Withdrawing -->
                            <div id="withdrawing-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Withdrawing
                                        <i class="fas fa-info-circle info-icon" data-category="withdrawing"></i>
                                    </span>
                                    <span class="category-pct" id="withdrawing-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-1">
                                    <input type="checkbox" id="q-2">
                                </div>
                            </div>

                            <!-- Start with Heart -->
                            <div id="heart-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Start with the heart
                                        <i class="fas fa-info-circle info-icon" data-category="heart"></i>
                                    </span>
                                    <span class="category-pct" id="heart-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-13">
                                    <input type="checkbox" id="q-19">
                                    <input type="checkbox" id="q-25">
                                </div>
                            </div>

                            <!-- Learn to Look -->
                            <div id="look-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Learn to look
                                        <i class="fas fa-info-circle info-icon" data-category="look"></i>
                                    </span>
                                    <span class="category-pct" id="look-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-14">
                                    <input type="checkbox" id="q-20">
                                    <input type="checkbox" id="q-26">
                                </div>
                            </div>

                            <!-- Make it Safe -->
                            <div id="safe-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Make it safe
                                        <i class="fas fa-info-circle info-icon" data-category="safe"></i>
                                    </span>
                                    <span class="category-pct" id="safe-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-15">
                                    <input type="checkbox" id="q-21">
                                    <input type="checkbox" id="q-27">
                                </div>
                            </div>

                            <!-- Master My Stories -->
                            <div id="stories-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Master my stories
                                        <i class="fas fa-info-circle info-icon" data-category="stories"></i>
                                    </span>
                                    <span class="category-pct" id="stories-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-16">
                                    <input type="checkbox" id="q-22">
                                    <input type="checkbox" id="q-28">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Violence Card -->
                <div class="result-column">
                    <h3>Violence</h3>
                    <div class="result-card">
                        <img class="card-img-top" src="../images/violence.png" alt="Violence">
                        <div class="card-body">
                            <!-- Controlling -->
                            <div id="controlling-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Controlling
                                        <i class="fas fa-info-circle info-icon" data-category="controlling"></i>
                                    </span>
                                    <span class="category-pct" id="controlling-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-7">
                                    <input type="checkbox" id="q-8">
                                </div>
                            </div>

                            <!-- Labeling -->
                            <div id="labeling-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Labeling
                                        <i class="fas fa-info-circle info-icon" data-category="labeling"></i>
                                    </span>
                                    <span class="category-pct" id="labeling-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-9">
                                    <input type="checkbox" id="q-10">
                                </div>
                            </div>

                            <!-- Attacking -->
                            <div id="attacking-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Attacking
                                        <i class="fas fa-info-circle info-icon" data-category="attacking"></i>
                                    </span>
                                    <span class="category-pct" id="attacking-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-11">
                                    <input type="checkbox" id="q-12">
                                </div>
                            </div>

                            <!-- STATE My Path -->
                            <div id="state-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        STATE my path
                                        <i class="fas fa-info-circle info-icon" data-category="state"></i>
                                    </span>
                                    <span class="category-pct" id="state-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-17">
                                    <input type="checkbox" id="q-23">
                                    <input type="checkbox" id="q-29">
                                </div>
                            </div>

                            <!-- Explore Others' Paths -->
                            <div id="explore-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Explore Others' Paths
                                        <i class="fas fa-info-circle info-icon" data-category="explore"></i>
                                    </span>
                                    <span class="category-pct" id="explore-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-18">
                                    <input type="checkbox" id="q-24">
                                    <input type="checkbox" id="q-30">
                                </div>
                            </div>

                            <!-- Move to Action -->
                            <div id="action-div" class="category-row">
                                <div class="category-header">
                                    <span class="category-name">
                                        Move to action
                                        <i class="fas fa-info-circle info-icon" data-category="action"></i>
                                    </span>
                                    <span class="category-pct" id="action-pct">0%</span>
                                </div>
                                <div class="category-checks">
                                    <input type="checkbox" id="q-31">
                                    <input type="checkbox" id="q-32">
                                    <input type="checkbox" id="q-33">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conclusion -->
            <div id="conclusion">
                <p>Save and/or share results:</p>
                <button id="copy-results">
                    <i class="fas fa-copy"></i> Copy
                </button>

                <p>We have a tool that can help you:</p>
                <p><a href="https://www.amazon.ca/Crucial-Conversations-Talking-Stakes-Second/dp/0071771328"
                    target="_blank" rel="noopener noreferrer">
                    Crucial Conversations
                </a></p>
            </div>
        </div>

    </main>

    <!-- Info Modal -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
            <h3>Common Logical Fallacies:</h3>
            <ul id="modal-fallacies"></ul>
        </div>
    </div>

    <!-- Exit Quiz Modal -->
    <div id="exit-quiz-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Are you sure you want to exit the quiz?</h2>
            <p>Your progress will not be saved.</p>
            <button id="confirm-exit-button">Yes, exit</button>
            <button id="cancel-exit-button">No, stay</button>
        </div>
    </div>

    <!-- Why Benefit Modal -->
    <div id="why-benefit-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Why this quiz can benefit you</h2>
            <ul>
                <li>Understand your communication style under stress</li>
                <li>Improve relationships and achieve your goals</li>
                <li>Make conscious choices for more productive conversations</li>
            </ul>
            <p style="text-align:center; font-weight:bold; margin-top:1rem;">
                Best of all, it's <span style="color:#C0392B;">FREE</span>!
            </p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Inspired by Crucial Conversation's various authors</p>
        <p>&copy; <span id="current-year"></span> RhytoLeaf Inc. All Rights Reserved</p>
    </footer>

    <!-- ================================================
         JAVASCRIPT â€” All logic preserved, jQuery removed
         ================================================ -->
    <script>
var answeredTrue = [];
var answeredFalse = [];
var currentQuestion = 0;
var questionStatus = new Array(33).fill(0);
var quizStarted = false;

var questionUpdateInterval = null;

function startQuiz() {
  quizStarted = true;
  document.getElementById("begin-button").style.display = "none";
  document.getElementById("true-button").style.display = "flex";
  document.getElementById("false-button").style.display = "flex";
  document.getElementById("question-hr").style.display = "block";

  const gridContainer = document.getElementById("question-grid");
  gridContainer.innerHTML = "";
  for (let i = 1; i <= 33; i++) {
    const button = document.createElement("button");
    button.innerHTML = i;
    button.id = "grid-btn-" + i;
    button.classList.add("grid-button");
    button.addEventListener("click", function() { jumpToQuestion(i); });
    gridContainer.appendChild(button);
  }

  currentQuestion = 1;
  document.getElementById("question-text").innerHTML = questions[0];
  document.getElementById("question-number").innerHTML = "Question 1";

  if (questionUpdateInterval) {
    clearInterval(questionUpdateInterval);
  }
  questionUpdateInterval = setInterval(updateQuestionPanel, 500);
}

function updateQuestionPanel() {
  if (currentQuestion >= 1 && currentQuestion <= 33) {
    document.getElementById("question-text").innerHTML = questions[currentQuestion - 1];
    document.getElementById("question-number").innerHTML = "Question " + currentQuestion;
  }

  var answeredQuestions = questionStatus.filter(function(s) { return s !== 0; }).length;
  var percentage = (answeredQuestions / 33) * 100;
  document.getElementById("quiz-progress").style.width = percentage + "%";
  document.getElementById("quiz-progress-text").textContent = Math.round(percentage) + "%";
}

function setAnsweredTrueText() {
  document.getElementById("answered-true").innerHTML = answeredTrue.toString();
}

function setQuestionText() {
  setAnsweredTrueText();
  updateQuestionPanel();
}

function pressTrue() {
  questionStatus[currentQuestion - 1] = 1;
  document.getElementById("grid-btn-" + currentQuestion).classList.add("true");
  document.getElementById("grid-btn-" + currentQuestion).classList.remove("false");

  if (!answeredTrue.includes(currentQuestion)) {
    answeredTrue.push(currentQuestion);
  }

  answeredTrue.forEach(setCheckboxValueChecked);
  document.getElementById("q-" + currentQuestion).checked = true;
  findNextQuestion();
}

function pressFalse() {
  questionStatus[currentQuestion - 1] = 2;
  document.getElementById("grid-btn-" + currentQuestion).classList.add("false");
  document.getElementById("grid-btn-" + currentQuestion).classList.remove("true");

  var index = answeredTrue.indexOf(currentQuestion);
  if (index > -1) {
    answeredTrue.splice(index, 1);
  }
  document.getElementById("q-" + currentQuestion).checked = false;
  findNextQuestion();
}

function jumpToQuestion(questionNumber) {
  currentQuestion = questionNumber;
  setQuestionText();
}

function findNextQuestion() {
  var nextQuestion = questionStatus.indexOf(0);
  if (nextQuestion === -1) {
    var answeredQuestions = questionStatus.filter(function(s) { return s !== 0; }).length;
    var percentage = (answeredQuestions / 33) * 100;
    document.getElementById("quiz-progress").style.width = percentage + "%";
    document.getElementById("quiz-progress-text").textContent = Math.round(percentage) + "%";
    endQuiz();
  } else {
    currentQuestion = nextQuestion + 1;
    setQuestionText();
  }
}

function setCheckboxValueChecked(id) {
  var el = document.getElementById("q-" + id);
  if (el) el.checked = true;
}

function endQuiz() {
  quizStarted = false;
  if (questionUpdateInterval) {
    clearInterval(questionUpdateInterval);
    questionUpdateInterval = null;
  }

  document.getElementById("begin-button").style.display = "none";
  document.getElementById("true-button").style.display = "none";
  document.getElementById("false-button").style.display = "none";
  document.getElementById("question-hr").style.display = "none";
  document.getElementById("question-text").innerHTML = "Please see your results below:";

  calculateResults();
  document.getElementById("result-card-container").style.display = "block";

  var resultCheckboxes = document.querySelectorAll("#result-card-container input[type='checkbox']");
  resultCheckboxes.forEach(function(checkbox) {
    checkbox.disabled = true;
  });

  document.getElementById("scroll-to-results").style.display = "block";
}

function calculateResults() {
  document.getElementById("result-card-container").style.display = "block";

  document.getElementById("masking-pct").innerHTML = calculatePCT("masking");
  document.getElementById("avoiding-pct").innerHTML = calculatePCT("avoiding");
  document.getElementById("withdrawing-pct").innerHTML = calculatePCT("withdrawing");
  document.getElementById("heart-pct").innerHTML = calculatePCT("heart");
  document.getElementById("look-pct").innerHTML = calculatePCT("look");
  document.getElementById("safe-pct").innerHTML = calculatePCT("safe");
  document.getElementById("stories-pct").innerHTML = calculatePCT("stories");
  document.getElementById("controlling-pct").innerHTML = calculatePCT("controlling");
  document.getElementById("labeling-pct").innerHTML = calculatePCT("labeling");
  document.getElementById("attacking-pct").innerHTML = calculatePCT("attacking");
  document.getElementById("state-pct").innerHTML = calculatePCT("state");
  document.getElementById("explore-pct").innerHTML = calculatePCT("explore");
  document.getElementById("action-pct").innerHTML = calculatePCT("action");
}

function calculatePCT(category) {
  var div = document.getElementById(category + "-div");
  var inputs = div.querySelectorAll("input");
  var checked = div.querySelectorAll("input:checked");
  var count = checked.length;
  var total = inputs.length;
  var pct = (count / total) * 100;

  if (pct < 34) return "Unlikely";
  if (pct >= 50) return "Fairly often";
  return Math.round(pct) + "%";
}

var inputs = document.querySelectorAll("input");
inputs.forEach(function(input) {
  input.addEventListener("change", function() {
    if (this.checked) {
      this.setAttribute("checked", true);
    } else {
      this.removeAttribute("checked");
    }
    calculatePCT(this.parentElement.parentElement.id.split("-")[0]);
  });
});

var questions = [
  "At times I avoid situations that might bring me into contact with people I'm having problems with.",
  "I have put off returning phone calls or emails because I simply didn't want to deal with the person who sent them.",
  "Sometimes when people bring up a touchy or awkward issue, I try to change the subject.",
  "When it comes to dealing with awkward or stressful subjects, sometimes I hold back rather than give my full and candid opinion.",
  "Rather than tell people exactly what I think, sometimes I rely on jokes, sarcasm, or snide remarks to let them know I'm frustrated.",
  "When I've got something tough to bring up, sometimes I offer weak or insincere compliments to soften the blow.",
  "In order to get my point across, I sometimes exaggerate my side of the argument.",
  "If I seem to be losing control of a conversation, I might cut people off or change the subject in order to bring it back to where I think it should be.",
  "When others make points that seem stupid to me, I sometimes let them know it without holding back at all.",
  "When I'm stunned by a comment, sometimes I say things that others might take as forceful or attacking comments such as 'Give me a break!' or 'That's ridiculous!'",
  "Sometimes when things get heated, I move from arguing against others' points to saying things that might hurt them personally.",
  "If I get into a heated discussion, I've been known to be tough on the other person. In fact, the person might feel a bit insulted or hurt.",
  "When I'm discussing an important topic with others, sometimes I move from trying to make my point to trying to win the battle.",
  "In the middle of a tough conversation, I often get so caught up in arguments that I don't see how I'm coming across to others.",
  "When talking gets tough and I do something hurtful, I'm quick to apologize for mistakes.",
  "When I think about a conversation that took a bad turn, I tend to focus first on what I did that was wrong rather than focus on others' mistakes.",
  "When I've got something to say that others might not want to hear, I avoid starting out with tough conclusions, and instead start with facts that help them understand where I'm coming from.",
  "I can tell very quickly when others are holding back or feeling defensive in a conversation.",
  "Sometimes I decide that it's better not to give harsh feedback because I know that it's bound to cause real problems.",
  "When conversations aren't working, I step back from the fray, think about what's happening, and take steps to make it better.",
  "When others get defensive because they misunderstand me, I quickly get us back on track by clarifying what I do and don't mean.",
  "There are some people I'm rough on because, to be honest, they need or deserve what I give them",
  "I sometimes make absolute statements like 'The fact is ___' or 'It's obvious that ___' to be sure I get my point across.",
  "If others hesitate to share their views, I sincerely invite them to say what's on their mind, no matter what it is.",
  "At times I argue hard for my view--hoping to keep others from bringing up opinions that would be a waste of energy to discuss.",
  "Even when things get tense, I adapt quickly to how others are responding to me and try a new strategy.",
  "When I find that I'm at cross-purposes with someone, I often keep trying to win my way rather than looking for common ground.",
  "When things don't go well, I'm more inclined to see the mistakes others made than notice my own role.",
  "After I share strong opinions, I go out of my way to invite others to share their views, particularly opposing ones.",
  "When others hesitate to share their views, I do whatever I can to make it safe for them to speak honestly.",
  "Sometimes I have to discuss things I thought had been settled because I don't keep track of what was discussed before.",
  "I find myself in situations where people get their feelings hurt because they thought they would have more of a say in final decisions than they end up having.",
  "I get frustrated sometimes at how long it takes some groups to make decisions because too many people are involved.",
];
    </script>

    <script>
// Scroll to results button
document.getElementById("scroll-to-results").addEventListener("click", function() {
    document.getElementById("results-header").scrollIntoView({ behavior: "smooth" });
});
    </script>

    <script>
// Info modal data
var fallacyDescriptions = {
    "Straw Man": "Misrepresenting or exaggerating an opponent's argument to make it easier to attack.",
    "Equivocation": "Using a word or phrase with multiple meanings to mislead or create confusion.",
    "Red Herring": "Introducing an irrelevant topic into an argument to divert attention from the main issue.",
    "Changing the Subject": "Similar to a red herring, this is a deliberate shift of the discussion to a different topic to avoid the original point.",
    "Appeal to Emotion (Silence)": "Using emotional appeals to avoid addressing the issue at hand.",
    "Argument from Ignorance": "Claiming something is true because it hasn't been proven false, or vice versa.",
    "Appeal to Force": "Using threats, coercion, or intimidation to force acceptance of an argument.",
    "Ad Hominem": "Attacking the person making the argument rather than the argument itself.",
    "Genetic Fallacy": "Dismissing or validating an argument based on its source or origin, rather than its content.",
    "Appeal to Spite": "Using spite or ill will to support or reject a claim, rather than logic."
};

var categoryInfo = {
    masking: {
        title: "Masking (Silence)",
        description: "Understating or selectively showing your true opinions. Sarcasm, sugarcoating, and couching are common forms of masking.",
        fallacies: ["Straw Man", "Equivocation"]
    },
    avoiding: {
        title: "Avoiding (Silence)",
        description: "Steering completely away from sensitive subjects. You talk, but without addressing the real issues.",
        fallacies: ["Red Herring", "Changing the Subject"]
    },
    withdrawing: {
        title: "Withdrawing (Silence)",
        description: "Pulling out of a conversation completely. You either exit the conversation or exit the room.",
        fallacies: ["Appeal to Emotion (Silence)", "Argument from Ignorance"]
    },
    heart: {
        title: "Start with the Heart",
        description: "This is a healthy communication skill. It means staying focused on what you really want, and not getting sidetracked by wanting to win, punish, or keep the peace.",
        fallacies: []
    },
    look: {
        title: "Learn to Look",
        description: "This is a healthy communication skill. It means paying attention to when a conversation becomes crucial, and recognizing when safety is at risk.",
        fallacies: []
    },
    safe: {
        title: "Make it Safe",
        description: "This is a healthy communication skill. It means creating an environment of mutual respect and purpose where everyone feels comfortable contributing.",
        fallacies: []
    },
    stories: {
        title: "Master My Stories",
        description: "This is a healthy communication skill. It means managing your own emotions and the narratives you create about others.",
        fallacies: []
    },
    controlling: {
        title: "Controlling (Violence)",
        description: "Coercing others to your way of thinking. You might do this by either forcing your views on others or dominating the conversation.",
        fallacies: ["Appeal to Force", "Ad Hominem"]
    },
    labeling: {
        title: "Labeling (Violence)",
        description: "Dismissing someone by attaching a label to them. This is a way of stereotyping or categorizing people so you can dismiss them.",
        fallacies: ["Ad Hominem", "Genetic Fallacy"]
    },
    attacking: {
        title: "Attacking (Violence)",
        description: "You move from winning the argument to making the other person suffer. Tactics include belittling and threatening.",
        fallacies: ["Ad Hominem", "Appeal to Spite"]
    },
    state: {
        title: "STATE My Path",
        description: "This is a healthy communication skill. It's a set of skills for sharing your views, even when they are controversial or unpopular.",
        fallacies: []
    },
    explore: {
        title: "Explore Others' Paths",
        description: "This is a healthy communication skill. It means actively listening to and understanding others' perspectives.",
        fallacies: []
    },
    action: {
        title: "Move to Action",
        description: "This is a healthy communication skill. It means translating discussions into clear decisions and commitments.",
        fallacies: []
    }
};

var infoModal = document.getElementById("info-modal");
var modalTitle = document.getElementById("modal-title");
var modalDescription = document.getElementById("modal-description");
var modalFallacies = document.getElementById("modal-fallacies");

document.querySelectorAll(".info-icon").forEach(function(icon) {
    icon.addEventListener("click", function() {
        var category = this.dataset.category;
        var info = categoryInfo[category];

        modalTitle.textContent = info.title;
        modalDescription.textContent = info.description;

        modalFallacies.innerHTML = "";
        if (info.fallacies.length === 0) {
            var li = document.createElement("li");
            li.textContent = "None";
            modalFallacies.appendChild(li);
        } else {
            info.fallacies.forEach(function(fallacy) {
                var li = document.createElement("li");
                li.innerHTML = "<b>" + fallacy + ":</b> " + fallacyDescriptions[fallacy];
                modalFallacies.appendChild(li);
            });
        }

        infoModal.style.display = "block";
    });
});

// Close buttons
document.querySelectorAll(".close-button").forEach(function(btn) {
    btn.addEventListener("click", function() {
        this.closest(".modal").style.display = "none";
    });
});

// Click outside modal to close
window.addEventListener("click", function(event) {
    if (event.target.classList.contains("modal")) {
        event.target.style.display = "none";
    }
});
    </script>

    <script>
// Copy results
document.getElementById("copy-results").addEventListener("click", function() {
    var resultsText = "Style Under Stress Test Results\n\n";
    resultsText += "***Your score DOES NOT represent an inalterable character trait or a genetic propensity. It's merely a measure of your behavior and you can change that.***\n\n";

    resultsText += "--- SILENCE ---\n\n";
    resultsText += "Masking: " + document.getElementById("masking-pct").textContent + "\n";
    resultsText += categoryInfo.masking.description + "\n\n";
    resultsText += "Avoiding: " + document.getElementById("avoiding-pct").textContent + "\n";
    resultsText += categoryInfo.avoiding.description + "\n\n";
    resultsText += "Withdrawing: " + document.getElementById("withdrawing-pct").textContent + "\n";
    resultsText += categoryInfo.withdrawing.description + "\n\n";

    resultsText += "--- VIOLENCE ---\n\n";
    resultsText += "Controlling: " + document.getElementById("controlling-pct").textContent + "\n";
    resultsText += categoryInfo.controlling.description + "\n\n";
    resultsText += "Labeling: " + document.getElementById("labeling-pct").textContent + "\n";
    resultsText += categoryInfo.labeling.description + "\n\n";
    resultsText += "Attacking: " + document.getElementById("attacking-pct").textContent + "\n";
    resultsText += categoryInfo.attacking.description + "\n\n";

    resultsText += "--- HEALTHY COMMUNICATION ---\n\n";
    resultsText += "Start with the heart: " + document.getElementById("heart-pct").textContent + "\n";
    resultsText += categoryInfo.heart.description + "\n\n";
    resultsText += "Learn to look: " + document.getElementById("look-pct").textContent + "\n";
    resultsText += categoryInfo.look.description + "\n\n";
    resultsText += "Make it safe: " + document.getElementById("safe-pct").textContent + "\n";
    resultsText += categoryInfo.safe.description + "\n\n";
    resultsText += "Master my stories: " + document.getElementById("stories-pct").textContent + "\n";
    resultsText += categoryInfo.stories.description + "\n\n";
    resultsText += "STATE my path: " + document.getElementById("state-pct").textContent + "\n";
    resultsText += categoryInfo.state.description + "\n\n";
    resultsText += "Explore Others' Paths: " + document.getElementById("explore-pct").textContent + "\n";
    resultsText += categoryInfo.explore.description + "\n\n";
    resultsText += "Move to action: " + document.getElementById("action-pct").textContent + "\n";
    resultsText += categoryInfo.action.description + "\n\n";

    navigator.clipboard.writeText(resultsText).then(function() {
        alert("Results copied to clipboard!");
    }, function() {
        alert("Could not copy results to clipboard.");
    });
});
    </script>

    <script>
// Why benefit modal
var whyBenefitModal = document.getElementById("why-benefit-modal");
document.getElementById("why-benefit-header").addEventListener("click", function() {
    whyBenefitModal.style.display = "block";
});
    </script>

    <script>
// Exit quiz modal
var exitQuizModal = document.getElementById("exit-quiz-modal");

function showExitQuizModal() {
    exitQuizModal.style.display = "block";
}

function handleHomeClick() {
    if (quizStarted) {
        showExitQuizModal();
    } else {
        window.location.href = "../index.html";
    }
}

document.getElementById("confirm-exit-button").addEventListener("click", function() {
    window.location.href = "../index.html";
});

document.getElementById("cancel-exit-button").addEventListener("click", function() {
    exitQuizModal.style.display = "none";
});
    </script>

    <script>
// Current year
document.getElementById("current-year").textContent = new Date().getFullYear();
    </script>
</body>
</html>
